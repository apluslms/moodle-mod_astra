function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("mod_astra/aplus_modal",["jquery","core/event","./aplus_highlightcode","theme_boost/bootstrap/dropdown","theme_boost/bootstrap/modal"],function(a,b){"use strict";a=function(a){return a&&a.__esModule?a:{default:a}}(a);b=d(b);function c(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,d=new WeakMap;return(c=function(a){return a?d:b})(a)}function d(a,b){if(!b&&a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var d=c(b);if(d&&d.has(a)){return d.get(a)}var e={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a){if("default"!=g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;if(h&&(h.get||h.set)){Object.defineProperty(e,g,h)}else{e[g]=a[g]}}}e.default=a;if(d){d.set(a,e)}return e}(function(b){var c={loader_selector:".modal-progress",loader_text_selector:".progress-bar",title_selector:".modal-title",content_selector:".modal-body",error_message_attribute:"data-msg-error"};function d(a,d){this.element=b(a);this.settings=b.extend({},c,d);this.init()}b.extend(d.prototype,{init:function init(){this.loader=this.element.find(this.settings.loader_selector);this.loaderText=this.loader.find(this.settings.loader_text_selector);this.title=this.element.find(this.settings.title_selector);this.content=this.element.find(this.settings.content_selector);this.messages={loading:this.loaderText.text(),error:this.loaderText.attr(this.settings.error_message_attribute)}},run:function run(a,b){switch(a){case"open":this.open(b);break;case"error":this.showError(b);break;case"content":this.showContent(b);break;}},open:function open(a){this.title.hide();this.content.hide();this.loaderText.removeClass("bg-danger").addClass("progress-bar-animated").text(a||this.messages.loading);this.loader.show();this.element.on("hidden.bs.modal",function(){b(".dropdown-toggle").dropdown()});this.element.modal("show")},showError:function showError(a){this.loaderText.removeClass("progress-bar-animated").addClass("bg-danger").text(a||this.messages.error)},showContent:function showContent(b){this.loader.hide();if(b.title){this.title.text(b.title);this.title.show()}if(b.content instanceof a.default){this.content.empty().append(b.content)}else{this.content.html(b.content)}this.content.show();return this.content}});b.fn.aplusModal=function(a,c,e){return this.each(function(){var f=b.data(this,"plugin_aplusModal");if(!f){f=new d(this,e);b.data(this,"plugin_aplusModal",f)}return f.run(a,c)})}})(a.default,window,document);(function(a,b){var c={modal_selector:"#page-modal",file_modal_selector:"#file-modal",body_regexp:/<body[^>]*>([\s\S]*)<\/body>/i,file:!1};function d(b,d){this.element=a(b);this.settings=a.extend({},c,d);this.init()}a.extend(d.prototype,{init:function init(){var c=this.element,d=this.settings;c.on("click",function(e){e.preventDefault();var f=c.attr("href");if(""===f||"#"==f){return!1}var g=a(d.file?d.file_modal_selector:d.modal_selector);g.aplusModal("open");a.get(f,function(e){if(d.file){var f=a("<pre/>").text(e);g.aplusModal("content",{title:c.text(),content:f});f.highlightCode()}else{var h=e.match(d.body_regexp);if(null!==h&&2==h.length){e=h[1]}var i=g.aplusModal("content",{content:e});i.find(".file-modal").aplusModalLink({file:!0});i.find("pre.hljs").highlightCode();b.notifyFilterContentUpdated(d.modal_selector)}}).fail(function(){g.aplusModal("error")})})}});a.fn.aplusModalLink=function(b){return this.each(function(){if(!a.data(this,"plugin_aplusModalLink")){a.data(this,"plugin_aplusModalLink",new d(this,b))}})}})(a.default,b,window,document)});
//# sourceMappingURL=aplus_modal.min.js.map
